function setCookie(e,l,t,o,r,a){if("undefined"!=typeof is_remember)return!1;var n=new Date;n.setTime(n.getTime());var s=new Date(n.getTime()+t);document.cookie=e+"="+escape(l)+(t?"; expires="+s.toGMTString():"")+(o?"; path="+o:"")+(r?"; domain="+r:"")+(a?"; secure":"")}function getCookie(e){var l=document.cookie,t=e+"=",o=l.indexOf("; "+t);if(-1==o){if(0!=(o=l.indexOf(t)))return null}else o+=2;var r=document.cookie.indexOf(";",o);return-1==r&&(r=l.length),unescape(l.substring(o+t.length,r))}function deleteCookie(e,l,t){getCookie(e)&&(document.cookie=e+"="+(l?"; path="+l:"")+(t?"; domain="+t:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}function checkAPlayer(){void 0==APlayerController.player?setAPlayerObject():void 0==APlayerController.observer&&setAPlayerObserver()}function setAPlayerObject(){void 0!=APlayerController.id&&document.querySelectorAll("meting-js").forEach((e,l)=>{e.meta.id==APlayerController.id&&void 0!=document.querySelectorAll("meting-js")[l].aplayer&&(APlayerController.player=document.querySelectorAll("meting-js")[l].aplayer,setAPlayerObserver())})}function setAPlayerObserver(){try{function e(e){let l=((e.clientX||e.changedTouches[0].clientX)-APlayerController.volumeBar.getBoundingClientRect().left)/APlayerController.volumeBar.clientWidth;l=Math.max(l,0),l=Math.min(l,1),APlayerController.player.volume(l)}APlayerController.player.on("play",function(e){updateAPlayerControllerStatus();var l=document.querySelector("meting-js").aplayer.list.index,t=document.querySelector("meting-js").aplayer.list.audios[l].title,o=document.querySelector("meting-js").aplayer.list.audios[l].artist;$.message({title:"音乐通知",message:"正在播放："+t+" - "+o,type:"success"})}),APlayerController.player.on("pause",function(e){updateAPlayerControllerStatus();var l=document.querySelector("meting-js").aplayer.list.index,t=document.querySelector("meting-js").aplayer.list.audios[l].title,o=document.querySelector("meting-js").aplayer.list.audios[l].artist;$.message({title:"音乐通知",message:"暂停播放："+t+" - "+o,type:"success"})}),APlayerController.player.on("volumechange",function(e){onUpdateAPlayerVolume()}),APlayerController.player.on("loadstart",function(e){updateTitle()}),APlayerController.player.on("error",function(e){var l=document.querySelector("meting-js").aplayer.list.index,t=document.querySelector("meting-js").aplayer.list.audios[l].title;$.message({title:"音乐通知",message:"歌曲："+t+"加载失败~",type:"warning"})}),APlayerController.volumeBarWrap=document.getElementsByClassName("nav volume")[0].children[0],APlayerController.volumeBar=APlayerController.volumeBarWrap.children[0];const l=l=>{e(l)},t=o=>{APlayerController.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active"),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",l),e(o)};APlayerController.volumeBarWrap.addEventListener("mousedown",()=>{APlayerController.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active"),document.addEventListener("mousemove",l),document.addEventListener("mouseup",t)}),updateAPlayerControllerStatus(),onUpdateAPlayerVolume(),APlayerController.observer=!0,console.log("APlayerController ready!")}catch(e){delete APlayerController.observer}}function updateAPlayerControllerStatus(){try{APlayerController.player.audio.paused?(document.getElementsByClassName("nav toggle")[0]&&document.getElementsByClassName("nav toggle")[0].children[0].classList.add("fa-play"),document.getElementsByClassName("nav toggle")[0]&&document.getElementsByClassName("nav toggle")[0].children[0].classList.remove("fa-pause")):(document.getElementsByClassName("nav toggle")[0]&&document.getElementsByClassName("nav toggle")[0].children[0].classList.remove("fa-play"),document.getElementsByClassName("nav toggle")[0]&&document.getElementsByClassName("nav toggle")[0].children[0].classList.add("fa-pause"))}catch(e){console.log(e)}}function onUpdateAPlayerVolume(){try{APlayerController.volumeBar.children[0].style.width=100*APlayerController.player.audio.volume+"%"}catch(e){console.log(e)}}function aplayerToggle(){checkAPlayer();try{APlayerController.player.toggle()}catch(e){console.log(e)}}function aplayerBackward(){checkAPlayer();try{APlayerController.player.skipBack(),APlayerController.player.play()}catch(e){console.log(e)}}function aplayerForward(){checkAPlayer();try{APlayerController.player.skipForward(),APlayerController.player.play()}catch(e){console.log(e)}}function aplayerVolume(e){checkAPlayer();try{APlayerController.player.volume(e)}catch(e){console.log(e)}}function updateTitle(){checkAPlayer();try{let e=APlayerController.player.list.index,l=APlayerController.player.list.audios[e],t=l.title.length>15?"<span class='text-animate'>"+l.title+"</span>":l.title;document.getElementsByClassName("nav music-title")[0]&&(document.getElementsByClassName("nav music-title")[0].innerHTML=t)}catch(e){console.log(e)}}function autoPlayMusic(){let e=null==getCookie("autoPlayMusic");setTimeout(function(){if($(window).width()>500&&e&&APlayerController.autoPlay){let e=!0;$.message({title:"音乐通知",message:"即将自动播放，点击<a id='stopMusic' class='stopMusic fix-cursor-pointer'>停止播放</a>",type:"warning"}),setTimeout(function(){void 0==APlayerController.player&&checkAPlayer(),e&&aplayerToggle()},3500),$("#stopMusic").click(function(){e=!1,$(".c-message--close").click(),setTimeout(()=>{$.message({title:"音乐通知",time:999999,message:"是否永久关闭音乐自动播放?  <a id='dontPlayMusic' class='stopMusic fix-cursor-pointer'><b>确认</b></a>",type:"warning"}),$("#dontPlayMusic").click(function(){setCookie("autoPlayMusic","false",6048e5,"/"),$(".c-message--close").click(),setTimeout(()=>{$.message({title:"音乐通知",time:6e3,message:"关闭成功，未来一周内将不再提醒~",type:"success"})},1e3)})},1e3)})}},1500)}jQuery,checkAPlayer(),setTimeout(function(){checkAPlayer()},3e3),setTimeout(function(){checkAPlayer()},1e4),autoPlayMusic();